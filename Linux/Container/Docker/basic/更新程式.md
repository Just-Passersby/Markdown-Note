# 更新程式
本篇內容接續[容器化程式](./容器化程式.md)

# 更新原始碼
如果想要變更image的內容，可以透過修改原始碼或dockerfile然後重新build更新image。

以官方的`getting-started`為例，我們要更新代辦事項為空時顯示的資訊，這段程式碼在`src/static/js/app.js`，做出以下修改：
```JS
- <p className="text-center">No items yet! Add one above!</p>
+ <p className="text-center">You have no todo items yet! Add one above!</p>
```
更新完後使用`docker build`即可更新image：
```bash
docker build -t getting-started .
```
接著用新的image啟動新的Container：
```bash
docker run -dp 127.0.0.1:3000:3000 getting-started
```
如果你沒關閉過Container，你應該護收到以下類似的報錯：
```
docker: Error response from daemon: failed to set up container networking: driver failed programming external connectivity on endpoint confident_pasteur (54b627f21acfdad1e87ca4e08235f45e749d154930572e697355cde61ac9027b): Bind for 127.0.0.1:3000 failed: port is already allocated
```
簡單來說，你bind在host上面的Port被佔用了

# Stop & Remove old container
要取得目前正在運行的Docker資訊，使用以下指令：
```bash
docker ps
```
停止Container使用以下指令：
```bash
docker stop <the-container-id>
```
> 如果不能用container-id，那就是用container-name(對應`docker ps` NAMES的欄位)
刪除Container:
```bash
docker rm <the-container-id>
```
> 如果不能用container-id，那就是用container-name(對應`docker ps` NAMES的欄位)`

如果使用VS code，點到Containers的欄位對你要操作的Container右鍵就能做你要的操作了，有手有眼就能操作

# 相關資訊
[Docker Docs - docker CLI reference](https://docs.docker.com/reference/cli/docker/)

# Reference
[Docker Docs - Update the application](https://docs.docker.com/get-started/workshop/03_updating_app/)